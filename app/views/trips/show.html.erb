<h1>Trip: <%= @trip.name %></h1>
<h3><%= @trip.destination_name %></h3>
<h3><%= @trip.destination_address %></h3>

<section class="climbs">
  <h1>Climbs</h1>
    <% @trip.climbs.each do |climb| %>
      <section id="climb-<%= climb.id%>">
        <%= link_to climb.name, climb.url %>
      </section>
    <% end %>
</section>


<div id="map"></div>
<script type="text/javascript">
  function initMap() {
    var destinationCoords = new google.maps.LatLng(<%= @trip.lat %>, <%= @trip.lng %>);

    var mapOptions = {
      center: destinationCoords,
      zoom: 10,
      disableDefaultUI: true
    };

    var map = new google.maps.Map(document.getElementById('map'), mapOptions);

    var marker = new google.maps.Marker({
      position: destinationCoords,
      map: map
    });

    <% @trip.climbs.each_with_index do |climb, index| %>
    climbCoords<%= index %> = new google.maps.LatLng(<%= climb.lat %>, <%= climb.lng %>);
     var climbMarker = new google.maps.Marker({
       position: climbCoords<%= index %>,
       map: map
     })
    <% end %>
    // climbCoords1 = new google.maps.LatLng(<%= @trip.climbs.first.lat %>, <%= @trip.climbs.first.lng %>);
    // var climbMarker = new google.maps.Marker({
    //   position: climbCoords1,
    //   map: map
    // })
    //
    // climbCoords2 = new google.maps.LatLng(<%= @trip.climbs.last.lat %>, <%= @trip.climbs.last.lng %>);
    // var climbMarker = new google.maps.Marker({
    //   position: climbCoords2,
    //   map: map
    // })

    google.maps.event.addListener(marker, 'click', function () {
      document.getElementById("destination").style.fontSize = "35px";
      document.getElementById("destination").style.color = "red";
    });
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%=ENV['GOOGLE_MAP_API']%>&callback=initMap"
async defer></script>
